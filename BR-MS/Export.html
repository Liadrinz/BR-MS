<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>出库登记</title>
    <link rel="stylesheet" href="lib/eleme-index.css">
    <style>
        .el-form-item{
            margin:0;
        }
        [v-cloak]{
            display: none;
        }
    </style>
</head>
<body>
<div id="app" v-cloak>
    <el-form>
        <hr>
        <!--出库业务-->
        <el-form :model="outGoing">
            <el-form :inline="true">
                <el-form-item label="操作员：" size="mini" prop="realName"><el-input v-model="outGoing.realName" :disabled="true"></el-input></el-form-item>
                <el-form-item label="仓库名：" size="mini" prop="warehouseName"><el-input v-model="outGoing.warehouseName" :disabled="true"></el-input></el-form-item>
            </el-form>
            <el-form :inline="true">
                <el-form-item label="建单人：" size="mini" prop="founder"><el-input v-model="outGoing.founder"></el-input></el-form-item>
                <el-form-item label="建单日期：" size="mini" prop="createTime"><el-input v-model="outGoing.createTime"></el-input></el-form-item>
            </el-form>
            <el-form :inline="true">
                <el-form-item label="出库单号：" size="mini" prop="inboundNum"><el-input v-model="outGoing.inboundNum"></el-input></el-form-item>
                <el-form-item label="出库类别：" size="mini" prop="method">
                    <el-select v-model="outGoing.method">
                        <el-option label="正常出库" value="type1"></el-option>
                    </el-select>
                </el-form-item>
            </el-form>
            <hr style="height:1px; border:none; border-top:1px dashed #c0c4cc">
            <el-table :data="outResult" size="mini" max-height="250">
                <el-table-column type="index" width="44" label="序号"></el-table-column>
                <el-table-column prop="huopinbianhao" label="货品编号"></el-table-column>
                <el-table-column prop="huopinmingcheng" label="货品名称"></el-table-column>
                <el-table-column prop="danwei" label="单位"></el-table-column>
                <!--可编辑项 begin-->
                <el-table-column prop="chukushiliang" label="出库数量" width="75"><template slot-scope="scope"><el-input size="mini"></el-input></template></el-table-column>
                <el-table-column prop="chukushijian" label="出库时间" width="80"><template slot-scope="scope"><el-input size="mini"></el-input></template></el-table-column>
                <el-table-column prop="quxiang" label="去向"><template slot-scope="scope"><el-input size="mini"></el-input></template></el-table-column>
                <!--可编辑项 end-->
                <el-table-column prop="zerenren" label="责任人"></el-table-column>
                <el-table-column prop="lianxidianhua" label="联系电话"></el-table-column>
                <el-table-column prop="beizhu" label="备注"></el-table-column>
                <el-table-column prop="shanchu" label="">
                    <!--点击删除当前已选中货品-->
                    <template slot-scope="scope">
                        <el-button size="mini" style="background-color: #ececec" @click.native.prevent="deleteRow(scope.$index,outResult)">删除</el-button>
                    </template>
                </el-table-column>
            </el-table>
            <!--保存 生成货品清单-->
            <el-form>
                <el-form-item size="medium">
                    <el-button style="background-color: #ececec">保存</el-button>
                    <!--点击调用打印机 打印outResult表格清单-->
                    <el-button style="background-color: #ececec">生成货品清单</el-button>
                </el-form-item>
            </el-form>
            <hr>
            <!--查找-->
            <el-form :model="queryCondition">
                <el-form :inline="true">
                    <!-- TODO: 放入组件 -->
                    <el-form-item label="货品类别">
                        <el-ext-foldable :options="[1,2,3,4]"></el-ext-foldable>
                    </el-form-item>
                </el-form>
                <el-form :inline="true">
                    <el-form-item label="货品名称：" size="mini"><el-input v-model="queryCondition.huopinmingcheng"></el-input></el-form-item>
                    <el-form-item label="供应商：" size="mini"><el-input v-model="queryCondition.gongyingshang" placeholder="直接输入查询"></el-input></el-form-item>
                    <el-form-item label="货品编号：" size="mini"><el-input v-model="queryCondition.number"></el-input></el-form-item>
                </el-form>
                <el-form><el-form-item size="mini"><el-button style="background-color: #ececec">查找</el-button></el-form-item></el-form>
                <hr style="height:1px; border:none; border-top:1px dashed #c0c4cc">
                <el-table :data="queryResult" size="mini" max-height="250">
                    <el-table-column type="index" width="50" label="序号"></el-table-column>
                    <el-table-column prop="huopinbianhao" label="货品编号"></el-table-column>
                    <el-table-column prop="huopinmingcheng" label="货品名称"></el-table-column>
                    <el-table-column prop="rukushijian" label="入库时间"></el-table-column>
                    <el-table-column prop="gongyingshang" label="供应商"></el-table-column>
                    <el-table-column prop="xiangxixinxi" label="详细信息" width="80">
                        <!--点击查看当前物资详细信息-->
                        <template slot-scope="scope">
                            <el-button size="mini"style="background-color: #ececec" @click="dialogVisible=true">查看</el-button>
                            <el-dialog title="货品详细信息" :visible.sync="dialogVisible" width="50%" :before-close="handleClose">
                                <span><!--点击查看物资详情 里的 物资详情-->
                                    <el-form :model="getDetails">
                                        <el-form-item label="  物资ID：" size="mini"></el-form-item>
                                        <el-form-item label="物资名称：" size="mini"></el-form-item>
                                        <el-form-item label="    编号：" size="mini"></el-form-item>
                                        <el-form-item label="物资类型：" size="mini"></el-form-item>
                                        <el-form-item label="  关键字：" size="mini"></el-form-item>
                                        <el-form-item label="    规格：" size="mini"></el-form-item>
                                        <el-form-item label="    外观：" size="mini"></el-form-item>
                                        <el-form-item label="时间特征：" size="mini"></el-form-item>
                                        <el-form-item label="安全条件：" size="mini"></el-form-item>
                                        <el-form-item label="运载尺寸：" size="mini"></el-form-item>
                                        <el-form-item label="温度条件：" size="mini"></el-form-item>
                                        <el-form-item label="湿度条件：" size="mini"></el-form-item>
                                        <el-form-item label="其他条件：" size="mini"></el-form-item>
                                        <el-form-item label="  生产商：" size="mini"></el-form-item>
                                        <el-form-item label="生产时间：" size="mini"></el-form-item>
                                        <el-form-item label="过期时间：" size="mini"></el-form-item>
                                        <el-form-item label="所在仓库：" size="mini"></el-form-item>
                                        <el-form-item label="    经度：" size="mini"></el-form-item>
                                        <el-form-item label="    维度：" size="mini"></el-form-item>
                                        <el-form-item label="    纬度：" size="mini"></el-form-item>
                                        <el-form-item label="    海拔：" size="mini"></el-form-item>
                                        <el-form-item label="  国家ID：" size="mini"></el-form-item>
                                        <el-form-item label="  地区ID：" size="mini"></el-form-item>
                                        <el-form-item label="  省份ID：" size="mini"></el-form-item>
                                        <el-form-item label="    市ID：" size="mini"></el-form-item>
                                        <el-form-item label="    县ID：" size="mini"></el-form-item>
                                        <el-form-item label="详细地址：" size="mini"></el-form-item>
                                        <el-form-item label="过程管理：" size="mini"><span>（0:不受监管 1:受监管）</span></el-form-item>
                                        <el-form-item label="  状态ID：" size="mini"></el-form-item>
                                        <el-form-item label="状态类型：" size="mini"></el-form-item>
                                        <el-form-item label="  状态值：" size="mini"></el-form-item>
                                        <el-form-item label="    数量：" size="mini"></el-form-item>
                                        <el-form-item label="最后一次修改时间：" size="mini"></el-form-item>
                                    </el-form>
                                </span>
                                <span slot="footer" class="dialog-footer">
                                <el-button @click="dialogVisible = false" size="mini" style="background-color: #ececec">关闭</el-button>
                            </span>
                            </el-dialog>
                        </template>
                    </el-table-column>
                    <el-table-column prop="zerenren" label="责任人"></el-table-column>
                    <el-table-column prop="lianxidianhua" label="联系电话"></el-table-column>
                    <el-table-column prop="chuku" label="">
                        <!--点击出库 复制转移所有当前货品编号至 outResult-->
                        <template slot-scope="scope">
                            <el-button size="mini" style="background-color: #ececec">出库</el-button>
                        </template>
                    </el-table-column>
                </el-table>
            </el-form>
        </el-form>
    </el-form>
</div>
</body>
<script src="lib/vue.js"></script>
<script src="lib/eleme-index.js"></script>
<script src="res/dependencies.js"></script>
<script>
    const ElExtFoldable = require('/comps/el-ext-foldable');

    var app = new Vue({
        el: '#app',
        data: function(){
            return{
                queryCondition:{/* 查找部分 —— 查找条件 */
                    huopinmingcheng:'',
                    gongyingshang:'',
                    huopinbianhao:'',
                    huopinleibie:''
                },
                queryResult:[{/* 查找部分 —— 查找结果表格 */
                    huopinbianhao: '1',
                    huopinmingcheng: '',
                    rukkushijian: '',
                    gongyingshang: '',
                    xiangxixinxi: '',
                    zerenren: '',
                    lianxidianhua: '',
                    chuku:''
                }],
                outGoing:{/* 出库业务 —— 相关信息填写 */
                    warehouseName:'',/*仓库名*/
                    realName:'',/*操作员姓名*/
                    inboundNum:'',/*出入库单号*/
                    founder:'',/*建单人*/
                    createTime:'',/*创建时间--建单日期*/
                    method:''/*查询类别（出入库）*/
                },
                outResult:[{/* 出库业务 —— 信息结果表格 */
                    huopinbianhao:'',
                    huopinmingcheng:'',
                    danwei:'',
                    chukushuliang:'',
                    chukushijian:'',
                    quxiang:'',
                    zerenren:'',
                    lianxidianhua:'',
                    beizhu:''
                }],
                fileList: [{/* 出库业务 —— 出库单上传 */
                    name: '默认文件',
                    url: ''
                }],
                dialogVisible:false,  /*查看当前货品详细信息 查看 button*/
                getDetails:{ /*查看物资详情中 物资信息项*/

                }
            }
        },
        mounted: function () {
            //从后端拉取数据
            getData({});
        },
        methods: {
            /*出库单上传相关函数 begin*/
            handleRemove(file, fileList) {
                console.log(file, fileList);
            },
            handlePreview(file) {
                console.log(file);
            },
            handleExceed(files, fileList) {
                this.$message.warning(`当前限制选择 3 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);
            },
            beforeRemove(file, fileList) {
                return this.$confirm(`确定移除 ${ file.name }？`);
            },
            /*出库单上传相关函数 end*/

            /*表格内 删除 按钮  begin*/
            deleteRow(index, rows) {
                rows.splice(index, 1);
            }
        },
        components: {
            ElExtFoldable: ElExtFoldable
        }
    });
</script>

</html>